<UserControl x:Class="Soheil.Views.PP.TaskReport"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
			 xmlns:local="clr-namespace:Soheil.Views.PP"
			 xmlns:ppevm="clr-namespace:Soheil.Core.ViewModels.PP.Report;assembly=Soheil.Core"
             xmlns:cal="clr-namespace:Arash.PersianDateControls;assembly=PersianDateControls" 
             xmlns:cc="clr-namespace:Soheil.Controls.CustomControls;assembly=Soheil.Controls" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             Height="22" d:DesignWidth="300">
	<Canvas Width="0" Height="0">
		<Border Style="{StaticResource boundaryStyle}" BorderThickness="0,0,0,2" CornerRadius="0,0,3,3">
			<Border.Width>
				<MultiBinding Converter="{StaticResource StartEndToWidthConverter}">
					<Binding Path="StartDateTime"/>
					<Binding Path="EndDateTime"/>
					<Binding ElementName="ppTable" Path="DataContext.HourZoom"/>
				</MultiBinding>
			</Border.Width>
			<Border.Margin>
				<MultiBinding Converter="{StaticResource ppTaskBorderMarginConverter}">
					<Binding Path="StartDateTime"/>
					<Binding ElementName="ppTable" Path="DataContext.HourZoom"/>
				</MultiBinding>
			</Border.Margin>
			<Border.Effect>
				<DropShadowEffect ShadowDepth="0" BlurRadius="3"/>
			</Border.Effect>
			<Border.ToolTip>
				<UniformGrid Rows="4" Columns="2">
					<TextBlock Text="شروع بازه گزارش ایستگاه "/>
					<TextBlock Text="{Binding StartDateTime, Converter={StaticResource dateTimeToCompactConverter}}"/>
					<TextBlock Text="پایان بازه گزارش ایستگاه "/>
					<TextBlock Text="{Binding EndDateTime, Converter={StaticResource dateTimeToCompactConverter}}"/>
					<WrapPanel>
						<Image Style="{StaticResource TargetPointImage}"/>
						<TextBlock Text="مقدار هدف ایستگاه در بازه زمانی "/>
					</WrapPanel>
					<TextBlock Text="{Binding TargetPoint}"/>
					<WrapPanel>
						<Image Style="{StaticResource ProducedG1Image}"/>
						<TextBlock Text="خروجی سالم ایستگاه در بازه زمانی "/>
					</WrapPanel>
					<TextBlock Text="{Binding ProducedG1}"/>
				</UniformGrid>
			</Border.ToolTip>

			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>
				<Thumb DragStarted="startDragStart" DragDelta="startDragDelta" DragCompleted="startDragEnd">
					<Thumb.Template>
						<ControlTemplate>
							<Border Style="{StaticResource startBoundaryStyle}">
								<TextBlock Text="شروع" HorizontalAlignment="Center" VerticalAlignment="Center" IsHitTestVisible="False"/>
							</Border>
						</ControlTemplate>
					</Thumb.Template>
				</Thumb>
				<Popup x:Name="startPopup" IsOpen="False">
					<Border BorderBrush="White" BorderThickness="1" CornerRadius="5" Background="#4FFF" FlowDirection="RightToLeft" Padding="5" Margin="0,5,0,0">
						<Border.Effect>
							<DropShadowEffect ShadowDepth="0" BlurRadius="4"/>
						</Border.Effect>
						<UniformGrid Rows="3" Columns="2">
							<TextBlock Text="{Loc txtStartDate}"/>
							<cal:PersianDatePicker SelectedDate="{Binding StartDate}"/>
							<TextBlock Text="{Loc txtStartTime}"/>
							<cc:TimeBox Time="{Binding StartTime}"/>
							<Button Margin="50,2,-60,0">
								<WrapPanel>
									<Image Style="{StaticResource Save16Image}"/>
									<TextBlock Text="{Loc txtSave}"/>
								</WrapPanel>
							</Button>
						</UniformGrid>
					</Border>
				</Popup>
				<Thumb Grid.Column="4" DragStarted="endDragStart" DragDelta="endDragDelta" DragCompleted="endDragEnd">
					<Thumb.Template>
						<ControlTemplate>
							<Border Style="{StaticResource endBoundaryStyle}">
								<TextBlock Text="پایان" HorizontalAlignment="Center" VerticalAlignment="Center" IsHitTestVisible="False"/>
							</Border>
						</ControlTemplate>
					</Thumb.Template>
				</Thumb>
				<Popup x:Name="endPopup" IsOpen="False">
					<Border BorderBrush="White" BorderThickness="1" CornerRadius="5" Background="#4FFF" FlowDirection="RightToLeft" Padding="5" Margin="0,5,0,0">
						<Border.Effect>
							<DropShadowEffect ShadowDepth="0" BlurRadius="4"/>
						</Border.Effect>
						<Grid>
							<Grid.RowDefinitions>
								<RowDefinition Height="25"/>
								<RowDefinition Height="25"/>
								<RowDefinition Height="25"/>
								<RowDefinition Height="25"/>
								<RowDefinition Height="25"/>
							</Grid.RowDefinitions>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							
							<TextBlock Text="{Loc txtEndDate}" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0"/>
							<TextBlock Text="{Loc txtEndTime}" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0"/>
							<CheckBox Content="مدت زمان گزارش" IsChecked="{Binding ByEndDate, Converter={StaticResource inverter}}" VerticalAlignment="Center" Grid.Row="2" Grid.Column="0"/>
							<TextBlock Text="مقدار هدف بازه" VerticalAlignment="Center" Grid.Row="3" Grid.Column="0"/>

							<cal:PersianDatePicker SelectedDate="{Binding EndDate}" Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2"/>
							<cc:TimeBox Time="{Binding EndTime}" Grid.Row="1" Grid.Column="1"/>
							<cc:TimeBox DurationSeconds="{Binding DurationSeconds, Mode=TwoWay}" IsReadOnly="{Binding ByEndDate}" Grid.Row="2" Grid.Column="1"/>
							<Button Command="{Binding AutoFindDuration}" ToolTip="محاسبه خودکار زمان از طریق مقدار هدف ایستگاه" Grid.Row="2" Grid.Column="2">
								<Image Style="{StaticResource Reload18Image}"/>
							</Button>
							<TextBox Text="{Binding TargetPoint}" FlowDirection="LeftToRight" Grid.Row="3" Grid.Column="1"/>
							<Button Command="{Binding AutoFindTargetPoint}" ToolTip="محاسبه خودکار مقدار هدف ایستگاه از طریق زمان پایان" Grid.Row="3" Grid.Column="2">
								<Image Style="{StaticResource Reload18Image}"/>
							</Button>
							<Button Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3" Width="150">
								<WrapPanel>
									<Image Style="{StaticResource Save16Image}"/>
									<TextBlock Text="{Loc txtSave}"/>
								</WrapPanel>
							</Button>
						</Grid>
					</Border>
				</Popup>
				<TextBlock Grid.Column="2" Text="/"/>
				<TextBox Grid.Column="1" Text="{Binding ProducedG1}" ToolTip="{Loc txtProducedG1}" FontSize="12"/>
				<Image Grid.Column="1" Style="{StaticResource ProducedG1Image}" HorizontalAlignment="Right" Margin="5,0" IsHitTestVisible="False"/>
				<TextBox Grid.Column="3" Text="{Binding TargetPoint}" ToolTip="{Loc txtTargetPoint}" FontSize="12"/>
				<Image Grid.Column="3" Style="{StaticResource TargetPointImage}" HorizontalAlignment="Left" Margin="5,0" IsHitTestVisible="False"/>
			</Grid>
		</Border>
	</Canvas>
</UserControl>
