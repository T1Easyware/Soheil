<UserControl x:Class="Soheil.Views.MaterialPlanning.MaterialPlanning"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:cc="clr-namespace:Soheil.Controls.CustomControls;assembly=Soheil.Controls" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="600">
	<UserControl.Resources>
		<sys:String x:Key="itemWidthStr">50</sys:String>
		<sys:Double x:Key="itemWidth">50</sys:Double>
	</UserControl.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="80"/>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition Width="0"/>
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="40"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- material headers -->
		<ItemsControl Grid.Column="0" Grid.Row="1" ItemsSource="{Binding Materials}">
			<ItemsControl.ItemTemplate>
				<DataTemplate>
					<Border Height="{Binding Height}" TextBlock.Foreground="White">
						<DockPanel>
							<StackPanel DockPanel.Dock="Left">
								<TextBlock Text="{Binding Inventory}"/>
								<Separator Height="1" HorizontalAlignment="Stretch"/>
								<TextBlock Text="{Binding SafetyStock}"/>
							</StackPanel>
							<TextBlock Text="{Binding Name}" DockPanel.Dock="Top"/>
							<TextBlock Text="{Binding Code}"/>
						</DockPanel>
					</Border>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
		</ItemsControl>


		<!-- hour headers -->
		<ItemsControl Grid.Column="1" Grid.Row="0" ItemsSource="{Binding Hours}">
			<ItemsControl.ItemTemplate>
				<DataTemplate>
					<Border Background="{Binding Color}" Width="{StaticResource itemWidth}">
						<TextBlock Text="{Binding Text}" Foreground="White"/>
					</Border>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
			<ItemsControl.ItemsPanel>
				<ItemsPanelTemplate>
					<StackPanel Orientation="Horizontal"/>
				</ItemsPanelTemplate>
			</ItemsControl.ItemsPanel>
		</ItemsControl>
	
		
		<!-- cells -->
		<ItemsControl Grid.Column="0" Grid.Row="1" ItemsSource="{Binding Cells}">
			<ItemsControl.ItemTemplate>
				<DataTemplate>
					<ItemsControl ItemsSource="{Binding Requests}">
						<Border Width="{StaticResource itemWidth}" Height="30" BorderBrush="White" Background="#3FFF" BorderThickness="1" CornerRadius="1">
							<Border.Effect>
								<DropShadowEffect BlurRadius="3" ShadowDepth="0"/>
							</Border.Effect>
							<DockPanel TextBlock.Foreground="White">
								<Button DockPanel.Dock="Left" Padding="0" Margin="0">
									<Image Style="{StaticResource WarehouseOutImage}" Margin="0"/>
								</Button>
								<TextBlock Text="{Binding StationName}" DockPanel.Dock="Top"/>
								<TextBlock Text="{Binding UnitName}" DockPanel.Dock="Right"/>
								<TextBlock Text="{Binding Quantity}" HorizontalAlignment="Right"/>
							</DockPanel>
						</Border>
					</ItemsControl>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
			<ItemsControl.ItemsPanel>
				<ItemsPanelTemplate>
					<Grid cc:GridHelper.RowCount="{Binding MaterialsCount}" cc:GridHelper.ColumnCount="24" cc:GridHelper.AllColumnsWidth="{StaticResource itemWidthStr}"/>
				</ItemsPanelTemplate>
			</ItemsControl.ItemsPanel>
			<ItemsControl.ItemContainerStyle>
				<Style TargetType="ContentPresenter">
					<Setter Property="Grid.Row" Value="{Binding Path=RawMaterial.Index}"/>
					<Setter Property="Grid.Column" Value="{Binding Path=Hour.Index}"/>
				</Style>
			</ItemsControl.ItemContainerStyle>
		</ItemsControl>
	</Grid>
</UserControl>
